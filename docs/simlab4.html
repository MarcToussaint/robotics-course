<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SimLab Exercise 4 - Grasp &mdash; Robotics Course  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="SimLab - Project Proposal and Final Presentation" href="simlab5.html" />
    <link rel="prev" title="SimLab Exercise 3 - OpenCV" href="simlab3.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Robotics Course
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="simlab.html">Lab Course in Simulation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="simlab1.html">SimLab Exercise 1 - Basic Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="simlab2.html">SimLab Exercise 2 - Motion</a></li>
<li class="toctree-l2"><a class="reference internal" href="simlab3.html">SimLab Exercise 3 - OpenCV</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">SimLab Exercise 4 - Grasp</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#a-grasp-lift-drop-a-hopping-ball">a) Grasp, lift &amp; drop a hopping ball</a></li>
<li class="toctree-l3"><a class="reference internal" href="#b-throw-the-ball">b) Throw the ball</a></li>
<li class="toctree-l3"><a class="reference internal" href="#c-bonus-and-for-a-box">c) Bonus: …and for a box</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="simlab5.html">SimLab - Project Proposal and Final Presentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="rai.html">Robotics Code Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="komo.html">Learning KOMO (K-Order Markov Optimization)</a></li>
<li class="toctree-l1"><a class="reference internal" href="skeleton.html">Learning about Skeletons &amp; LGP</a></li>
<li class="toctree-l1"><a class="reference internal" href="script.html">Reference material</a></li>
<li class="toctree-l1"><a class="reference internal" href="script.html#scene-robot-description">Scene &amp; Robot Description</a></li>
<li class="toctree-l1"><a class="reference internal" href="script.html#kinematics">Kinematics</a></li>
<li class="toctree-l1"><a class="reference internal" href="script.html#placeholder">Placeholder</a></li>
<li class="toctree-l1"><a class="reference internal" href="script.html#d-transformations-rotations-quaternions">3D Transformations, Rotations, Quaternions</a></li>
<li class="toctree-l1"><a class="reference internal" href="script.html#rai-references">RAI references</a></li>
<li class="toctree-l1"><a class="reference internal" href="script.html#id15">Placeholder</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Robotics Course</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="simlab.html">Lab Course in Simulation</a></li>
      <li class="breadcrumb-item active">SimLab Exercise 4 - Grasp</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="simlab-exercise-4-grasp">
<h1>SimLab Exercise 4 - Grasp<a class="headerlink" href="#simlab-exercise-4-grasp" title="Permalink to this heading"></a></h1>
<p>Before new exercises, always update the repo:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>cd $HOME/git/robotics-course
git pull
git submodule update
cd build
make -j4
</pre></div>
</div>
<ul class="simple">
<li><p>This is the last formal exercise. After this you’re free to follow
on with your projects.</p></li>
<li><p>In this exercise you are allowed to either shortcut perception (use
the ‘cheat perception’ as described below and in the sample code),
or – better – to use the perception pipeline you developed in the
previous exercise. You can always use the cheat perception to debug
your perception pipeline.</p></li>
</ul>
<section id="a-grasp-lift-drop-a-hopping-ball">
<h2>a) Grasp, lift &amp; drop a hopping ball<a class="headerlink" href="#a-grasp-lift-drop-a-hopping-ball" title="Permalink to this heading"></a></h2>
<p>In <code class="docutils literal notranslate"><span class="pre">05-grasp</span></code> you already find a minimal setting where a dropping
and hopping ball is grasped. The hopping is realized in simulation by
an <em>imp</em> – which is a little callback code that can perturb the state
of the simulation after each simulation step. This helps simulating
stochastic effects and failures.</p>
<p>The current implementation uses the</p>
<ol class="arabic simple">
<li><p>Use your OpenCV code instead of cheat perception to continuously
track the sp here. Keep the your model object always tracking the
real red sphere.</p></li>
<li><p>The current code uses plain IK with a pseudo inverse from exercise
1 to generate motion (you can stack the Jacobians and residuals for
multiple objectives, see the motion slides). Try to replace this by
a KOMO method that solves, in each iteration, for the optimal final
grasp pose, and then generate continuous motion by commanding a
small constant velocity towards that final grasp pose. Close the
gripper when the final grasp pose is reached.</p></li>
<li><p>The current code sometimes makes the arm occlude the red ball. Can
you choose a better alignment to avoid ball occlusion?</p></li>
<li><p>Optimize things to be fast enough (but still smooth) to actually
grasp the hopping ball reliably.</p></li>
<li><p>After the successful grasp, lift the gripper (e.g., using KOMO to compute a good final lift/drop pose for the ball).</p></li>
<li><p>Then call <code class="docutils literal notranslate"><span class="pre">openGripper(&quot;R_gripper&quot;)</span></code> to drop the ball again.</p></li>
<li><p>Ideally, repeat grasp-lift-drop robustly in an endless loop.</p></li>
</ol>
</section>
<section id="b-throw-the-ball">
<h2>b) Throw the ball<a class="headerlink" href="#b-throw-the-ball" title="Permalink to this heading"></a></h2>
<p>Do everything as above, but instead of just dropping the ball, throw
it (far) using the robot. How can you design a motion that has a
desired object velocity ad the point of <code class="docutils literal notranslate"><span class="pre">openGripper</span></code>?</p>
</section>
<section id="c-bonus-and-for-a-box">
<h2>c) Bonus: …and for a box<a class="headerlink" href="#c-bonus-and-for-a-box" title="Permalink to this heading"></a></h2>
<p>Repeating the above exercise for a box is rather involved, esp. if you do not cheat perception and have to retrieve the box orientation (long axis) using opencv. Therefore, for this exercise it is fine for you to use cheat perception.</p>
<ol class="arabic simple">
<li><p>Replace the red sphere by a sphere-swept box of size <code class="docutils literal notranslate"><span class="pre">[.06,</span> <span class="pre">.06,</span>
<span class="pre">.15,</span> <span class="pre">.01]</span></code> (in both, the RealWorld and your model world).</p></li>
<li><p>When localizing the box, retrieve both, the center and the rotation
matrix. Note that the third column in the rotation matrix is the
unit vector which points into the direction where the box is 15cm
long. Let A be this direction.</p></li>
<li><p>Design a box gripping final pose, where the gripper x-axis is
orthogonal to A, and orthogonal to world-z. Does this suffice to
design a good box grasp? (Cf. Exercise 2)</p></li>
</ol>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="simlab3.html" class="btn btn-neutral float-left" title="SimLab Exercise 3 - OpenCV" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="simlab5.html" class="btn btn-neutral float-right" title="SimLab - Project Proposal and Final Presentation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Marc Toussaint.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>